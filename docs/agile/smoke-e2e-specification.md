# スモークE2Eテスト仕様書

- 作成者（Codex）:
- レビュアー（人間）:
- 最終更新日:
- スプリント / Issue:

## シナリオ概要
- テストID (例: E-SM-001):
- シナリオ名:
- 目的 (早期に検出したい重大回帰ポイント):
- 優先度: smoke / critical / その他

## 前提条件
| 項目 | 内容 |
| --- | --- |
| テストユーザー / 権限 |  |
| 必須データセット |  |
| 環境 | CI headless / Ephemeral staging / ブラウザ: headless-chrome |
| 外部サービス依存 |  |
| Feature Flag / Config |  |

## シナリオステップ
```
Given ...
When ...
Then ...
```

## 主要期待結果
- [ ] HTTP/画面結果: 
- [ ] UI表示: 
- [ ] バックエンド検証 (DB/キュー/ログ): 

## 重要検証ポイント
| 種別 | 検証内容 | 方法 | 自動判定 |
| --- | --- | --- | --- |
| HTTP |  |  | Yes / No |
| UI |  |  | Yes / No |
| DB |  |  | Yes / No |
|  |  |  |  |

## 実行情報
- コマンド: `npx playwright test tests/e2e/smoke/<ID>.spec.ts`
- CIジョブ名: e2e-smoke / Smoke Pipeline
- 所要時間目安: <= 60s
- 実行頻度: PR ごと / 日次 / リリース前
- スクリーンショット / 動画ルール: 失敗時スクショ保存、動画は任意

## 後処理
- データクリーンアップ: (例: `DELETE FROM entries WHERE ...`)
- セッション破棄 / ログアウト:
- その他: 

## 合格基準
- [ ] 主要期待結果が全て満たされる
- [ ] クリティカルな検証ポイントがパス
- [ ] 後処理が完了し副作用なし

## リトライ方針
- 自動リトライ: 1回 / 無効 / カスタム条件
- 再発時対応: チケット化 / On-call 通知

## オーナー
- QA担当:
- 開発窓口:
- レビューサイクル: スプリントごと / 月次

## 変更履歴
- YYYY-MM-DD: 初版作成 (PR # / 担当者)
- YYYY-MM-DD:

