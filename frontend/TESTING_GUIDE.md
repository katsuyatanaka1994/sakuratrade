# フィルター機能テストガイド

## 確認方法

### 1. アプリケーションアクセス
- React フロントエンド: http://localhost:3000
- ダッシュボードが表示され、「トレードジャーナル」セクションが見えます

### 2. 新しいフィルター機能の確認

#### フィルターボタン
- トレードジャーナルセクションの右上に「フィルター」ボタンが表示されています
- アイコン + 「フィルター」ラベル
- フィルターが適用されている場合、青い小さなドット（○）が表示されます

#### フィルターダイアログ
1. **フィルターボタンをクリック**すると、モーダルダイアログが開きます
2. **3つのフィルター項目**が表示されます：
   - **結果**: ラジオボタン（すべて・利確・損切り）
   - **銘柄検索**: テキスト入力（コードまたは銘柄名を入力）
   - **日付**: ボタン型入力（— — — で表示）

#### 日付範囲選択
1. **日付ボタンをクリック**すると、大きなカレンダーオーバーレイが表示されます
2. **カレンダー機能**:
   - 前月/翌月ナビゲーション（< >）
   - 「本日へ」ボタン（表示月を当月に移動）
   - 本日は薄い枠線で表示
   - 範囲選択: 1クリック目で開始日、2クリック目で終了日
   - 選択範囲は青色でハイライト
   - 完了/キャンセルボタン

#### フィルター適用
1. **検索するボタン**でフィルターが適用されます
2. **適用中のフィルター**が青いボックスで表示されます
3. **URLクエリ**も自動更新されます（例: ?type=profit&q=7203）

## テストケース

### ケース1: 結果フィルター
1. フィルターボタンをクリック
2. 「利確」を選択
3. 「検索する」をクリック
4. 利確のトレードのみが表示される

### ケース2: 銘柄検索
1. フィルターボタンをクリック
2. 銘柄検索に「7203」を入力
3. 「検索する」をクリック
4. トヨタ自動車のトレードのみが表示される

### ケース3: 日付範囲
1. フィルターボタンをクリック
2. 日付ボタンをクリック
3. カレンダーで範囲を選択（例: 1月1日〜1月31日）
4. 「完了」をクリック
5. 「検索する」をクリック
6. 指定期間のトレードのみが表示される

### ケース4: 複合フィルター
1. 結果=「利確」+ 銘柄検索=「ソニー」+ 日付範囲設定
2. 全ての条件を満たすトレードのみが表示される

### ケース5: フィルタークリア
1. フィルターを適用後、ダイアログを再度開く
2. 「すべて」を選択、銘柄検索をクリア
3. 「検索する」でフィルターがリセットされる

## 期待される動作

### UI表示
- ✅ フィルターボタンが右上に表示
- ✅ アクティブ時に青いドット表示
- ✅ ダイアログが中央に表示
- ✅ カレンダーが大きく（46×34rem）表示
- ✅ 適用中フィルターが青いボックスで表示

### 機能
- ✅ ラジオボタンの選択状態保持
- ✅ テキスト入力の値保持
- ✅ 日付範囲の選択と表示
- ✅ 逆順選択時の自動入れ替え
- ✅ ESCキーでダイアログクローズ
- ✅ URLクエリとの同期

### データ表示
- ✅ フィルター条件に応じたトレード一覧更新
- ✅ 「○件のトレード記録」カウンター更新
- ✅ 条件に合うデータがない場合の空状態表示

## トラブルシューティング

### フィルターボタンが表示されない
- ブラウザのキャッシュをクリア（Cmd+Shift+R / Ctrl+Shift+R）
- 開発者ツールでコンソールエラーを確認

### カレンダーが表示されない
- Z-indexの問題の可能性
- 他のモーダルが開いていないか確認

### データが更新されない
- ネットワークタブでAPI呼び出しを確認
- コンソールでエラーログを確認

## 開発者向け情報

### 新規コンポーネント
- `FilterButton.tsx` - フィルターボタン
- `FilterDialog.tsx` - フィルターダイアログ
- `DateRangeOverlay.tsx` - カレンダーオーバーレイ

### 状態管理
- `filters: TradeFilterRuntime` - フィルター状態
- `showFilterDialog: boolean` - ダイアログ表示状態

### API統合
- JournalFiltersへの変換ロジック
- URL同期機能

現在実装済みで、http://localhost:3000 でテスト可能です！