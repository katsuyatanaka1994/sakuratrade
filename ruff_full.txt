E501 Line too long (151 > 120)
  --> app/services/gpt_analyzer.py:73:96
   |
71 | â€¦
72 | â€¦
73 | â€¦is_context or 'ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™'}ã‚’ä¸Šè¨˜JSONå½¢å¼ã§æŠ½å‡ºã—ã¦ãã ã•ã„ã€‚"
   |                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
74 | â€¦
75 | â€¦
   |

F841 Local variable `system_prompt` is assigned to but never used
   --> app/services/integrated_advice_service.py:139:5
    |
137 |     """ã‚·ãƒ³ãƒ—ãƒ«ãªGPTåˆ†æžï¼ˆçµ±åˆåˆ†æžã‚’ä½¿ã‚ãªã„å ´åˆï¼‰"""
138 |
139 |     system_prompt = (
    |     ^^^^^^^^^^^^^
140 |         "ã‚ãªãŸã¯ãƒ—ãƒ­ã®æ ªå¼ã‚¹ã‚¤ãƒ³ã‚°ãƒˆãƒ¬ãƒ¼ãƒ€ãƒ¼å…¼ã‚¢ãƒŠãƒªã‚¹ãƒˆã§ã™ã€‚"
141 |         "ãƒãƒ£ãƒ¼ãƒˆç”»åƒã‚’è§£æžã—ã€ãƒˆãƒ¬ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’æ—¥æœ¬èªžã§æä¾›ã—ã¦ãã ã•ã„ã€‚"
    |
help: Remove assignment to unused variable `system_prompt`

F841 Local variable `user_prompt` is assigned to but never used
   --> app/services/integrated_advice_service.py:144:5
    |
142 |     )
143 |
144 |     user_prompt = f"ã“ã®{symbol_context or 'æ ªä¾¡'}ã®ãƒãƒ£ãƒ¼ãƒˆç”»åƒã‚’è§£æžã—ã€{analysis_context or 'ãƒˆãƒ¬ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°'}ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’æ•™ãˆã¦ã                                 â€¦
    |     ^^^^^^^^^^^
145 |
146 |     # ç°¡æ˜“ç‰ˆã®GPTå‘¼ã³å‡ºã—ï¼ˆå®Ÿè£…ã¯çœç•¥ï¼‰
    |
help: Remove assignment to unused variable `user_prompt`

E501 Line too long (143 > 120)
   --> app/services/integrated_advice_service.py:144:94
    |
142 | â€¦
143 | â€¦
144 | â€¦s_context or 'ãƒˆãƒ¬ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°'}ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚"
    |                                        ^^^^^^^^^^^^^^^^^^^^^^^
145 | â€¦
146 | â€¦
    |

E501 Line too long (127 > 120)
   --> app/services/rule_based_analyzer.py:120:106
    |
118 | â€¦     value=f"20MA: {slope20_pct:+.2f}%, 60MA: {slope60_pct:+.2f}%",
119 | â€¦     evaluation=slope_evaluation,
120 | â€¦     comment=f"ç§»å‹•å¹³å‡ç·šã®å‚¾ãè©•ä¾¡ã€‚20MA: {slope20_pct:+.2f}%, 60MA: {slope60_pct:+.2f}%ã€‚ã‚¹ã‚³ã‚¢{slope_score}ç‚¹ã€‚",
    |                                                                                                               ^^^^^^^
121 | â€¦     source="rule_based",
122 | â€¦     confidence=0.85,
    |

E501 Line too long (131 > 120)
   --> app/services/rule_based_analyzer.py:161:101
    |
159 | â€¦     value=f"{label} ({final_score}ç‚¹)",
160 | â€¦     evaluation=evaluation_map.get(label, "ä¸­ç«‹"),
161 | â€¦     comment=f"Entry v0.4ã«ã‚ˆã‚‹ç·åˆåˆ¤å®š: {label}ã€‚æœ€çµ‚ã‚¹ã‚³ã‚¢{final_score}ç‚¹ã€ã‚²ãƒ¼ãƒˆé€šéŽ: {'â—‹' if gate_passed else 'Ã—'}",
    |                                                                                                               ^^^^^^^^^^^
162 | â€¦     source="rule_based",
163 | â€¦     confidence=0.90,
    |

F841 Local variable `current_price` is assigned to but never used
  --> app/services/strategy_estimator.py:8:5
   |
 6 |     trend = indicators.trend_check or ""
 7 |     rsi = indicators.rsi_overheat or ""
 8 |     current_price = indicators.current_price or 0
   |     ^^^^^^^^^^^^^
 9 |     recent_high = indicators.recent_high or 0
10 |     recent_low = indicators.recent_low or 0
   |
help: Remove assignment to unused variable `current_price`

F841 Local variable `sma_touch` is assigned to but never used
  --> app/services/strategy_estimator.py:13:5
   |
11 |     price_action = indicators.price_action or ""
12 |     volume = indicators.volume_trend or ""
13 |     sma_touch = indicators.sma_touch if indicators.sma_touch is not None else False
   |     ^^^^^^^^^
14 |
15 |     if "ä¸‹é™ãƒˆãƒ¬ãƒ³ãƒ‰" in trend and "RSIé«˜å€¤åœ" in rsi and price_action == "é™°ç·š" and volume == "å¢—åŠ ":
   |
help: Remove assignment to unused variable `sma_touch`

E712 Avoid equality comparisons to `True`; use `result["isPivot"]:` for truth checks
   --> app/tests/test_integrated_analysis.py:113:16
    |
111 |         assert "scores" in result
112 |         assert result["final"] == 75
113 |         assert result["isPivot"] == True
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^
114 |
115 |     @patch("subprocess.run")
    |
help: Replace with `result["isPivot"]`

E712 Avoid equality comparisons to `False`; use `not result["isPivot"]:` for false checks
   --> app/tests/test_integrated_analysis.py:125:16
    |
123 |         assert "scores" in result
124 |         assert result["final"] == 50
125 |         assert result["isPivot"] == False
    |                ^^^^^^^^^^^^^^^^^^^^^^^^^^
126 |
127 |     def test_pivot_result_to_indicators(self, analyzer):
    |
help: Replace with `not result["isPivot"]`

E501 Line too long (135 > 120)
  --> frontend/app/services/exit_feedback_service.py:37:119
   |
35 | â€¦
36 | â€¦ "long" else "ã‚·ãƒ§ãƒ¼ãƒˆ"
37 | â€¦} {request.entry_price}å†† â†’ {request.exit_price}å†† ({request.quantity}æ ª)"
   |                                                             ^^^^^^^^^^^^^^^
38 | â€¦
39 | â€¦
   |

F841 Local variable `lines` is assigned to but never used
   --> frontend/app/services/exit_feedback_service.py:137:13
    |
135 |         try:
136 |             # ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ‘ãƒ¼ã‚¹ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆå®Ÿéš›ã®å®Ÿè£…ã§ã¯ã‚ˆã‚Šè©³ç´°ãªè§£æžãŒå¿…è¦ï¼‰
137 |             lines = gpt_analysis.split("\n")
    |             ^^^^^
138 |             current_item = None
    |
help: Remove assignment to unused variable `lines`

F841 Local variable `current_item` is assigned to but never used
   --> frontend/app/services/exit_feedback_service.py:138:13
    |
136 |             # ã‚·ãƒ³ãƒ—ãƒ«ãªãƒ‘ãƒ¼ã‚¹ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆå®Ÿéš›ã®å®Ÿè£…ã§ã¯ã‚ˆã‚Šè©³ç´°ãªè§£æžãŒå¿…è¦ï¼‰
137 |             lines = gpt_analysis.split("\n")
138 |             current_item = None
    |             ^^^^^^^^^^^^
139 |
140 |             categories = ["ä»•æŽ›ã‘ã‚¿ã‚¤ãƒŸãƒ³ã‚°", "åˆ©ç¢ºåˆ¤æ–­", "æ”¹å–„ç‚¹"]
    |
help: Remove assignment to unused variable `current_item`

E501 Line too long (134 > 120)
   --> frontend/app/services/exit_feedback_service.py:161:109
    |
159 | â€¦         if request.position_type == "short":
160 | â€¦             profit_loss = -profit_loss
161 | â€¦         content = f"ã‚¨ãƒ³ãƒˆãƒªãƒ¼ä¾¡æ ¼ {request.entry_price}å††ã§ã®{'è²·ã„' if request.position_type == 'long' else 'å£²ã‚Š'}åˆ¤æ–­"
    |                                                                                                               ^^^^^^^^^^^^^^
162 | â€¦         comment = "ãƒãƒ£ãƒ¼ãƒˆãƒ‘ã‚¿ãƒ¼ãƒ³ã¨å¸‚å ´ç’°å¢ƒã‚’ç·åˆçš„ã«åˆ¤æ–­"
163 | â€¦     elif category == "åˆ©ç¢ºåˆ¤æ–­":
    |

E501 Line too long (131 > 120)
   --> frontend/app/services/exit_feedback_service.py:232:84
    |
231 | â€¦
232 | â€¦å ´åˆ†æžã¨æˆ¦ç•¥ã®è¦‹ç›´ã—ã‚’è¡Œã„ã€æ¬¡å›žã®æ”¹å–„ã«æ´»ã‹ã—ã¾ã—ã‚‡ã†ã€‚"
    |                                                 ^^^^^^^^^^^
233 | â€¦
234 | â€¦
    |

E501 Line too long (151 > 120)
  --> frontend/app/services/gpt_analyzer.py:73:96
   |
71 | â€¦
72 | â€¦
73 | â€¦is_context or 'ãƒ†ã‚¯ãƒ‹ã‚«ãƒ«æŒ‡æ¨™'}ã‚’ä¸Šè¨˜JSONå½¢å¼ã§æŠ½å‡ºã—ã¦ãã ã•ã„ã€‚"
   |                                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
74 | â€¦
75 | â€¦
   |

F841 Local variable `system_prompt` is assigned to but never used
   --> frontend/app/services/integrated_advice_service.py:139:5
    |
137 |     """ã‚·ãƒ³ãƒ—ãƒ«ãªGPTåˆ†æžï¼ˆçµ±åˆåˆ†æžã‚’ä½¿ã‚ãªã„å ´åˆï¼‰"""
138 |
139 |     system_prompt = (
    |     ^^^^^^^^^^^^^
140 |         "ã‚ãªãŸã¯ãƒ—ãƒ­ã®æ ªå¼ã‚¹ã‚¤ãƒ³ã‚°ãƒˆãƒ¬ãƒ¼ãƒ€ãƒ¼å…¼ã‚¢ãƒŠãƒªã‚¹ãƒˆã§ã™ã€‚"
141 |         "ãƒãƒ£ãƒ¼ãƒˆç”»åƒã‚’è§£æžã—ã€ãƒˆãƒ¬ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’æ—¥æœ¬èªžã§æä¾›ã—ã¦ãã ã•ã„ã€‚"
    |
help: Remove assignment to unused variable `system_prompt`

F841 Local variable `user_prompt` is assigned to but never used
   --> frontend/app/services/integrated_advice_service.py:144:5
    |
142 |     )
143 |
144 |     user_prompt = f"ã“ã®{symbol_context or 'æ ªä¾¡'}ã®ãƒãƒ£ãƒ¼ãƒˆç”»åƒã‚’è§£æžã—ã€{analysis_context or 'ãƒˆãƒ¬ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°'}ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’æ•™ãˆã¦ã                                 â€¦
    |     ^^^^^^^^^^^
145 |
146 |     # ç°¡æ˜“ç‰ˆã®GPTå‘¼ã³å‡ºã—ï¼ˆå®Ÿè£…ã¯çœç•¥ï¼‰
    |
help: Remove assignment to unused variable `user_prompt`

E501 Line too long (143 > 120)
   --> frontend/app/services/integrated_advice_service.py:144:94
    |
142 | â€¦
143 | â€¦
144 | â€¦s_context or 'ãƒˆãƒ¬ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°'}ã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’æ•™ãˆã¦ãã ã•ã„ã€‚"
    |                                        ^^^^^^^^^^^^^^^^^^^^^^^
145 | â€¦
146 | â€¦
    |

E501 Line too long (127 > 120)
   --> frontend/app/services/rule_based_analyzer.py:120:106
    |
118 | â€¦     value=f"20MA: {slope20_pct:+.2f}%, 60MA: {slope60_pct:+.2f}%",
119 | â€¦     evaluation=slope_evaluation,
120 | â€¦     comment=f"ç§»å‹•å¹³å‡ç·šã®å‚¾ãè©•ä¾¡ã€‚20MA: {slope20_pct:+.2f}%, 60MA: {slope60_pct:+.2f}%ã€‚ã‚¹ã‚³ã‚¢{slope_score}ç‚¹ã€‚",
    |                                                                                                               ^^^^^^^
121 | â€¦     source="rule_based",
122 | â€¦     confidence=0.85,
    |

E501 Line too long (131 > 120)
   --> frontend/app/services/rule_based_analyzer.py:161:101
    |
159 | â€¦     value=f"{label} ({final_score}ç‚¹)",
160 | â€¦     evaluation=evaluation_map.get(label, "ä¸­ç«‹"),
161 | â€¦     comment=f"Entry v0.4ã«ã‚ˆã‚‹ç·åˆåˆ¤å®š: {label}ã€‚æœ€çµ‚ã‚¹ã‚³ã‚¢{final_score}ç‚¹ã€ã‚²ãƒ¼ãƒˆé€šéŽ: {'â—‹' if gate_passed else 'Ã—'}",
    |                                                                                                               ^^^^^^^^^^^
162 | â€¦     source="rule_based",
163 | â€¦     confidence=0.90,
    |

E501 Line too long (125 > 120)
   --> simple_chat_server.py:355:98
    |
353 |     if not ai_response:
354 |         ai_response = (
355 |             f"AIå¿œç­”: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€Œ{user_message.get('text', user_message.get('type', 'ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸'))}ã€ã«å¯¾ã™ã‚‹åˆ†æžçµæžœã§ã™ã€‚"
    |                                                                                                                         ^^^^^
356 |             "ï¼ˆç¾åœ¨ã¯ãƒ¢ãƒƒã‚¯å¿œç­”ã€‚OPENAI_API_KEY ã‚’è¨­å®šã™ã‚‹ã¨å®Ÿå¿œç­”ã«åˆ‡ã‚Šæ›¿ã‚ã‚Šã¾ã™ï¼‰"
357 |         )
    |

F841 Local variable `indicators_data` is assigned to but never used
  --> test_integrated_system.py:45:9
   |
43 |         }
44 |
45 |         indicators_data = {
   |         ^^^^^^^^^^^^^^^
46 |             "sma5": 7500,
47 |             "sma20": 7480,
   |
help: Remove assignment to unused variable `indicators_data`

F841 Local variable `context` is assigned to but never used
  --> test_integrated_system.py:58:9
   |
56 |         }
57 |
58 |         context = {"recentPivotBarsAgo": 2, "priceBand": "mid", "entry_price": 7520, "position_type": "long"}
   |         ^^^^^^^
59 |
60 |         image_base64 = create_test_image()
   |
help: Remove assignment to unused variable `context`

F841 Local variable `image_base64` is assigned to but never used
  --> test_integrated_system.py:60:9
   |
58 |         context = {"recentPivotBarsAgo": 2, "priceBand": "mid", "entry_price": 7520, "position_type": "long"}
59 |
60 |         image_base64 = create_test_image()
   |         ^^^^^^^^^^^^
61 |
62 |         print("ðŸ“Š ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿:")
   |
help: Remove assignment to unused variable `image_base64`

E501 Line too long (160 > 120)
   --> test_integrated_system.py:189:121
    |
187 | â€¦
188 | â€¦
189 | â€¦} | {{ indicator.comment[:60] }}{{ "..." if indicator.comment|length > 60 else "" }} |
    |                                                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
190 | â€¦
    |

Found 26 errors.
No fixes available (13 hidden fixes can be enabled with the `--unsafe-fixes` option).
